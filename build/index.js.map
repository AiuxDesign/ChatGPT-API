{"version":3,"sources":["../src/index.ts","../src/ConversationStore.ts","../src/Tokenizer.ts","../src/utils/request.ts","../src/utils/urls.ts","../src/utils/index.ts","../src/ChatGPT.ts"],"sourcesContent":["export * from './ChatGPT'\r\n","import Keyv from 'keyv'\r\nimport LRUCache from 'lru-cache'\r\nimport Tokenizer from './Tokenizer'\r\n\r\nimport {\r\n  TChatGPTHTTPDataMessage,\r\n  IConversationStoreParams,\r\n  TCommonMessage,\r\n  ERole,\r\n} from './types'\r\n\r\n/**\r\n * conversation manage\r\n */\r\nexport default class ConversationStore {\r\n  #store: Keyv<TCommonMessage, any>\r\n  #lru: LRUCache<string, TCommonMessage>\r\n  /**\r\n   * in case some bad things happen\r\n   */\r\n  #maxFindDepth: number\r\n  #debug: boolean\r\n  constructor(params: IConversationStoreParams) {\r\n    const { maxKeys = 10000, maxFindDepth = 20, debug = false } = params\r\n    this.#lru = new LRUCache<string, TCommonMessage>({\r\n      max: maxKeys,\r\n    })\r\n    this.#store = new Keyv<TCommonMessage, any>({\r\n      store: this.#lru,\r\n    })\r\n    this.#maxFindDepth = maxFindDepth\r\n    this.#debug = debug\r\n\r\n    if (this.#debug) console.log('ConversationStore params', params)\r\n  }\r\n  /**\r\n   * get message by id\r\n   * @param id\r\n   * @returns\r\n   */\r\n  async get(id: string): Promise<TCommonMessage | undefined> {\r\n    return await this.#store.get(id)\r\n  }\r\n  /**\r\n   * set new message\r\n   * @param msg\r\n   * @returns\r\n   */\r\n  async set(msgs: TCommonMessage[]) {\r\n    for (const msg of msgs) {\r\n      await this.#store.set(msg.id, msg)\r\n    }\r\n    if (this.#debug) console.log('lru size', this.#lru.size)\r\n  }\r\n  /**\r\n   * check if the id exists in the store\r\n   * @param id\r\n   * @returns\r\n   */\r\n  async has(id: string): Promise<boolean> {\r\n    return await this.#store.has(id)\r\n  }\r\n  /**\r\n   * delete one message\r\n   * @param id\r\n   * @returns\r\n   */\r\n  async delete(id: string): Promise<boolean> {\r\n    return await this.#store.delete(id)\r\n  }\r\n  /**\r\n   * clear one conversation，it will be used when you set a new system prompt，which means that you will be in a new context，so early messages will be deleted\r\n   * @param id last conversation id\r\n   */\r\n  async clear1Conversation(id: string) {\r\n    let parentMessageId: string | undefined = id\r\n    let cnt = 0\r\n    while (parentMessageId && cnt < this.#maxFindDepth) {\r\n      cnt++\r\n      const msg: TCommonMessage | undefined = await this.get(parentMessageId)\r\n      if (msg) {\r\n        await this.delete(msg.id)\r\n      }\r\n      parentMessageId = msg?.parentMessageId\r\n    }\r\n  }\r\n  /**\r\n   * find messages in a conversation by id\r\n   * @param id parentMessageId\r\n   */\r\n  async findMessages(opts: {\r\n    id: string | undefined\r\n    tokenizer: Tokenizer\r\n    limit: number\r\n    availableTokens: number\r\n    ignore: boolean\r\n  }) {\r\n    let {\r\n      id = undefined,\r\n      tokenizer,\r\n      limit,\r\n      availableTokens,\r\n      ignore = false,\r\n    } = opts\r\n    let parentMessageId: string | undefined = id\r\n    let cnt = 0\r\n    const messages: TChatGPTHTTPDataMessage[] = []\r\n    while (parentMessageId && cnt < this.#maxFindDepth) {\r\n      const msg: TCommonMessage | undefined = await this.#store.get(\r\n        parentMessageId,\r\n      )\r\n      if (msg && !(ignore && msg.role === ERole.assistant)) {\r\n        let tokensCnt = msg.tokens || tokenizer.getTokenCnt(msg.text)\r\n        if (tokensCnt <= limit) {\r\n          if (availableTokens < tokensCnt) break\r\n          messages.unshift({\r\n            role: msg.role,\r\n            content: msg.text,\r\n          })\r\n          cnt++\r\n          availableTokens -= tokensCnt\r\n        }\r\n      }\r\n      parentMessageId = msg?.parentMessageId\r\n    }\r\n    if (this.#debug) {\r\n      console.log('availableTokens', availableTokens)\r\n    }\r\n    return messages\r\n  }\r\n  /**\r\n   * clear the store\r\n   */\r\n  async clearAll() {\r\n    await this.#store.clear()\r\n  }\r\n}\r\n","import { get_encoding, Tiktoken } from '@dqbd/tiktoken'\r\nimport { ITokensParams, TCommonMessage } from './types'\r\n\r\nexport default class Tokenizer {\r\n  #tokenizer: Tiktoken\r\n  #replaceReg: RegExp\r\n  #replaceCallback: (...args: any[]) => string\r\n  constructor(opts: ITokensParams) {\r\n    const {\r\n      encoding = 'cl100k_base',\r\n      replaceReg = /<\\|endoftext\\|>/g,\r\n      replaceCallback = (...args: any[]) => '',\r\n    } = opts\r\n    this.#tokenizer = get_encoding(encoding)\r\n    this.#replaceReg = replaceReg\r\n    this.#replaceCallback = replaceCallback\r\n  }\r\n  #encode(text: string): Uint32Array {\r\n    return this.#tokenizer.encode(text)\r\n  }\r\n  /**\r\n   * get the text tokens count\r\n   * @param text\r\n   * @returns\r\n   */\r\n  getTokenCnt(msg: TCommonMessage | string){\r\n    if(typeof msg === 'object' && msg.tokens) return msg.tokens\r\n    msg = typeof msg === 'object' ? msg.text : msg\r\n    const text = msg.replace(this.#replaceReg, this.#replaceCallback)\r\n    return this.#encode(text).length\r\n  }\r\n}\r\n\r\n// const token = new Tokenizer({\r\n//   replaceReg: /hello|world/g,\r\n//   replaceCallback(c: string) {\r\n//     return 'ok'\r\n//   },\r\n// })\r\n// console.log(token.getTokenCnt('hello world'))\r\n","import axios from 'axios'\nimport type { RawAxiosRequestConfig } from 'axios'\n\ninterface IRequestOpts {\n  debug?: boolean\n}\n\nexport async function get(config: RawAxiosRequestConfig, opts: IRequestOpts) {\n  const ins = axios.create({\n    method: 'GET',\n  })\n  if (opts.debug) {\n    console.log({ headers: ins.defaults.headers, data: ins.defaults.data })\n  }\n  return (await ins({ ...config })).data\n}\nexport async function post(config: RawAxiosRequestConfig, opts: IRequestOpts) {\n  const ins = axios.create({\n    method: 'POST',\n  })\n  if (opts.debug) {\n    ins.interceptors.request.use((config) => {\n      console.log(config)\n      return config\n    })\n  }\n  return (await ins({ ...config })).data\n}\n","/**\n * docs https://platform.openai.com/docs/api-reference/chat\n */\nconst urls = {\n  listModels: 'https://api.openai.com/v1/models', // get\n  createCompletion: 'https://api.openai.com/v1/completions', // post\n  createChatCompletion: 'https://api.openai.com/v1/chat/completions' // post\n}\n\nexport default urls\n","import { v4 as uuid } from 'uuid'\r\nimport { stdin, stdout } from 'process'\r\nimport { createInterface } from 'readline'\r\n\r\nexport function getReadLine() {\r\n  const rl = createInterface({ input: stdin, output: stdout })\r\n  const iter = rl[Symbol.asyncIterator]()\r\n  return async () => (await iter.next()).value\r\n}\r\n\r\n/**\r\n * generate unique id by uuidV4\r\n */\r\nexport function genId() {\r\n  return uuid()\r\n}\r\n","import { AxiosRequestConfig } from 'axios'\n\nimport ConversationStore from './ConversationStore'\nimport Tokenizer from './Tokenizer'\nimport {\n  IChatCompletion,\n  IChatGPTResponse,\n  IChatGPTUserMessage,\n  IChatGPTSystemMessage,\n  ERole,\n  TChatGPTHTTPDataMessage,\n  IChatGPTParams,\n} from './types'\nimport { post } from './utils/request'\nimport URLS from './utils/urls'\nimport { genId } from './utils/index'\n\n// https://platform.openai.com/docs/api-reference/chat\n// curl https://api.openai.com/v1/chat/completions \\\n//   -H 'Content-Type: application/json' \\\n//   -H 'Authorization: Bearer YOUR_API_KEY' \\\n//   -d '{\n//   \"model\": \"gpt-3.5-turbo\",\n//   \"messages\": [{\"role\": \"user\", \"content\": \"Hello!\"}]\n// }'\n\n// role https://platform.openai.com/docs/guides/chat/introduction\nexport class ChatGPT {\n  #apiKey = ''\n  #model = ''\n  #urls = URLS\n  #debug = false\n  #requestConfig: AxiosRequestConfig\n  #store: ConversationStore\n  #tokenizer: Tokenizer\n  #maxTokens: number\n  #limitTokensInAMessage: number\n  #ignoreServerMessagesInPrompt: boolean\n  constructor(opts: IChatGPTParams) {\n    const {\n      apiKey,\n      model = 'gpt-3.5-turbo',\n      debug = false,\n      requestConfig = {},\n      storeConfig = {},\n      tokenizerConfig = {},\n      maxTokens = 4096,\n      limitTokensInAMessage = 1000,\n      ignoreServerMessagesInPrompt = true,\n    } = opts\n\n    this.#apiKey = apiKey\n    this.#model = model\n    this.#debug = debug\n    this.#requestConfig = requestConfig\n    this.#store = new ConversationStore({\n      ...storeConfig,\n      debug: this.#debug,\n    })\n    this.#tokenizer = new Tokenizer(tokenizerConfig)\n    this.#maxTokens = maxTokens\n    this.#limitTokensInAMessage = limitTokensInAMessage\n    this.#ignoreServerMessagesInPrompt = ignoreServerMessagesInPrompt\n  }\n\n  /**\n   * send message to ChatGPT server\n   * @param opts.text new message\n   * @param opts.systemPrompt prompt message\n   * @param opts.parentMessageId\n   */\n  async sendMessage(\n    opts:\n      | { text: string; systemPrompt?: string; parentMessageId?: string }\n      | string,\n  ) {\n    opts = typeof opts === 'string' ? { text: opts } : opts\n    let { text, systemPrompt = undefined, parentMessageId = undefined } = opts\n\n    if (systemPrompt) {\n      if (parentMessageId) await this.#store.clear1Conversation(parentMessageId)\n      parentMessageId = undefined\n    }\n    const model = this.#model\n    const userMessage: IChatGPTUserMessage = {\n      id: genId(),\n      text,\n      role: ERole.user,\n      parentMessageId,\n      tokens: this.#tokenizer.getTokenCnt(text),\n    }\n    const messages = await this.#makeConversations(userMessage, systemPrompt)\n    if (this.#debug) {\n      console.log('messages', messages)\n    }\n    const res = (await post(\n      {\n        url: this.#urls.createChatCompletion,\n        headers: {\n          Authorization: this.#genAuthorization(),\n          'Content-Type': 'application/json',\n        },\n        data: {\n          model,\n          messages,\n        },\n        ...this.#requestConfig,\n      },\n      {\n        debug: this.#debug,\n      },\n    )) as IChatCompletion\n    if (this.#debug) {\n      // log response\n      console.log(\n        'response',\n        JSON.stringify({\n          ...res,\n          choices: [],\n        }),\n      )\n    }\n    const response: IChatGPTResponse = {\n      id: res.id,\n      text: res?.choices[0]?.message?.content,\n      created: res.created,\n      role: ERole.assistant,\n      parentMessageId: userMessage.id,\n      tokens: res?.usage?.completion_tokens,\n    }\n    const msgsToBeStored = [userMessage, response]\n    if (systemPrompt) {\n      const systemMessage: IChatGPTSystemMessage = {\n        id: genId(),\n        text: systemPrompt,\n        role: ERole.system,\n        tokens: this.#tokenizer.getTokenCnt(systemPrompt),\n      }\n      msgsToBeStored.unshift(systemMessage)\n    }\n    await this.#store.set(msgsToBeStored)\n    return response\n  }\n\n  /**\n   * make conversations for http request data.messages\n   */\n  async #makeConversations(userMessage: IChatGPTUserMessage, prompt?: string) {\n    let messages: TChatGPTHTTPDataMessage[] = []\n    let usedTokens = this.#tokenizer.getTokenCnt(userMessage.text)\n    if (prompt) {\n      messages.push({\n        role: ERole.system,\n        content: prompt,\n      })\n    } else {\n      messages = await this.#store.findMessages({\n        id: userMessage.parentMessageId,\n        tokenizer: this.#tokenizer,\n        limit: this.#limitTokensInAMessage,\n        availableTokens: this.#maxTokens - usedTokens,\n        ignore: this.#ignoreServerMessagesInPrompt\n      })\n    }\n    messages.push({\n      role: ERole.user,\n      content: userMessage.text,\n    })\n    return messages\n  }\n\n  /**\n   * generate HTTP Authorization\n   * @returns\n   */\n  #genAuthorization() {\n    return `Bearer ${this.#apiKey}`\n  }\n}\n"],"mappings":"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","names":["LRUCache","Keyv","axios","config","uuid","_debug","_store","_tokenizer"]}